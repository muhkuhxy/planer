@import models.territory._
@import models.territory.summary._
@import tags._

@(available: Seq[AvailableTerritory], issued: Seq[IssuedTerritory], friends: Seq[Friend])

<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <title>Gebiete</title>
   <link rel="stylesheet" href='@routes.Assets.at("stylesheets/style.css")'>
   <script src='@routes.Assets.at("lib/rx/dist/rx.all.min.js")' type="text/javascript"></script>
</head>
<body class="territory">

   @nav()

   <datalist id="friends">
      @for(name <- friends) {
      <option value="@name">
      }
   </datalist>

   <div class="container-fluid">

      <header class="row">
         <div class="col-xs-12">
            <h2>Gebiete</h2>
         </div>
      </header>

      <div class="row">
         <div class="col-xs-12">

            <h3>Im Kasten</h3>
            <table class="table available">
               <thead>
                  <tr>
                     <th>Gebietsnummer</th>
                     <th>Letzte Bearbeitung</th>
                     <th>Monate nicht bearbeitet</th>
                     <th>Anzahl Haushalte</th>
                     <th>Ort</th>
                     <th>Straßen</th>
                     <th></th>
                  </tr>
               </thead>
               <tbody>
                  @for(t <- available) {
                  <tr class='@{
                     if(t.monthsNotWorked.exists(_ > 9)) "bg-danger"
                     else if(t.monthsNotWorked.exists(_ > 6)) "bg-warning"
                     }'>
                     <td>@t.id</td>
                     <td>@t.lastWorked</td>
                     <td>@t.monthsNotWorked</td>
                     <td>@t.households</td>
                     <td>@t.city</td>
                     <td>@t.streets.mkString(", ")</td>
                     <td class="action">
                        <button class="btn btn-default issue" data-id="@t.id">Ausgeben
                           <span class="glyphicon glyphicon-upload"></span>
                        </button>
                        <div class="friend-selection">
                           <input type="text" placeholder="Namen eingeben" list="friends">
                           <button class="btn btn-primary ok">Ok</button>
                           <ul class="list-group"></ul>
                        </div>
                     </td>
                  </tr>
                  }
               </tbody>
            </table>

            <h3>Ausgegeben</h3>
            <table class="table issued">
               <thead>
                  <tr>
                     <th>Gebietsnummer</th>
                     <th>Datum Ausgabe</th>
                     <th>Monate ausgegeben</th>
                     <th>Name</th>
                     <th>Ort</th>
                     <th>Straßen</th>
                     <th></th>
                  </tr>
               </thead>
               <tbody>
                  @for(t <- issued) {
                  <tr>
                     <td>@t.id</td>
                     <td>@t.issued</td>
                     <td>@t.monthsIssued</td>
                     <td>@t.friend.name</td>
                     <td>@t.city</td>
                     <td>@t.streets.mkString(", ")</td>
                     <td class="action">
                        <button class="btn btn-default return">Zurück
                           <span class="glyphicon glyphicon-download"></span>
                        </button>
                        <button class="btn btn-default finished">Bearbeitet
                           <span class="glyphicon glyphicon-play-circle"></span>
                        </button>
                     </td>
                  </tr>
                  }
               </tbody>
            </table>
         </div>
      </div>

   </div>

   <script src='@routes.Assets.at("main.js")' type="text/javascript"></script>
   <script>app.territory.init()</script>
</body>
</html>
